
명시적으로, 혹은 서버에 의해 암시적으로 트랜잭션을 종료해야 변경 사항이 영구 적용된다.

`COMMIT` 명령어를 사용해서 서버가 변경 사항을 영구적으로 적용하고 트랜잭션 중에 사용된 모든 리소스를 해제하도록 지시한다.

[[트랜잭션 종료]] 이후의 모든 변경 사항을 취소하려면 `ROLLBACK` 명령어를 실행해서 데이터를 트랜잭션 전 상태로 되돌리도록 지시한다.

다음과 같은 이유료 트랜잭션이 종료될수 있다.

- 서버가 종료되고 서버가 재시작되면서 트랜잭션이 자동으로 롤백된다. 

- `ALTER TABLE` 과 같은 `SQL` 스키마 문을 실행하면 현재 트랜잭션이 커밋되고 새로운 트랜잭션이 시작된다.

>[!note] 새 테이블, index 추가, table 의 열 삭제 같은 데이터베이스 변경은 롤백할수 없다.<br><br>스키마를 변경하는 명령어는 트랜잭션 외부에서 수행해야 한다.<br><br>트랜잭션이 진행중 데이터베이스 변경시 현재 트랜잭션을 커밋하고 `SQL` 스키마 문 명령을 실행한 다음 자동으로 세션에 대한 새 트랜잭션을 시작한다.


- `START TRANSACTION` 명령어를 실행하면 이전 트랜잭션이 커밋된다.

- 서버가 `교착`(`DEADLOCK`) 상태를 감지했을 때 해당 트랜잭션의 원인이라고 판단되면 서버는 트랜잭션을 조기 종료한다. 이경우 `ROLLBACK` 되고 오류 메시지가 표시된다.

>[!note] 교착 상태는 두개의 서로 다른 트랜잭션이 다른 트랜잭션이 현재 보유하고 있는 리소스를 대기할때 발생한다. <br><br> 예를 들어 트랜잭션 A 가 방금 account 테이블을 업데이트하고, transaction 테이블에 대한 쓰기 잠금을 기다리고 있는 반면, 트랜잭션 B 는 transaction 테이블에 행을 삽입하고 account 테이블에 대한 쓰기 잠금을 기다리고 있을수  있다.<br><br>이처럼 두 트랜잭션이 동일한 페이지 또는 행을 수정할 경우, 각 트랜잭션은 다른 트랜잭션이 완료되고 필요한 리소스를 확보할때까지 영원히 기다린다.

>[!warning] 교착 상태가 감지되면 트랜잭션 중 하나를 선택해서 다른 트랜잭션이 진행될 수 있도록 롤백한다. 대부분의 경우 종료된 트랜잭션은 다시 시작할수 있으므로, 다른 교착 상태가 발생하지 않고 성공한다.

