
>[!info] [[테이블 생성]] 의 내용에서 이어진다.

---

앞의 `create query` 에서 `person` 테이블을 보면 `primary key` 는 고유한 값이어야 한다.
하지만 매번 고유한 값을 확인하고 해당 값에 `+1` 한 값을 입력하는건 힘든일이다.

이러한 부분을 위하 만들어진 숫자키 생성방법이 있다.

`MySQL` 에서는 `auto-increment` 기능을 사용하여 처리한다.
이미 테이블이 생성되어 있으므로, 테이블을 변경해야 한다.

테이블 변경을 위한 명령어는 `alter` 이다.

```mysql
set foreign_key_checks = 0; -- favorit_food 로 인해 foreign key 제약조건으로 삭제 안됨
							-- 처리를 위해 foreign_key_checks 를 비활성화
alter table person modify person_id smallint unsigned auto_increment;
set foreign_key_checks = 1; -- foreign_key_checks 활성화
```

이렇게 하면 `auto_increment` 가 된것을 볼수 있다.

```mysql
desc person;

Field      |Type                |Null|Key|Default|Extra         |
-----------+--------------------+----+---+-------+--------------+
person_id  |smallint unsigned   |NO  |PRI|       |auto_increment|
first_name |varchar(20)         |YES |   |       |              |
last_name  |varchar(20)         |YES |   |       |              |
eye_color  |enum('BR','BL','GR')|YES |   |       |              |
birth_date |date                |YES |   |       |              |
street     |varchar(30)         |YES |   |       |              |
city       |varchar(30)         |YES |   |       |              |
state      |varchar(20)         |YES |   |       |              |
country    |varchar(20)         |YES |   |       |              |
postal_code|varchar(20)         |YES |   |       |              |
```

## Insert 문

다음은 `sql` 의 `insert` 문이다.

```mysql
insert into person (person_id, first_name, last_name, eye_color, birth_date)
	values (
		null,
		'Wiliam',
		'Turner',
		'BR',
		'1970-05-27'
	);

select person_id , first_name , last_name , birth_date from person;
```

```sh
person_id|first_name|last_name|birth_date|
---------+----------+---------+----------+
        1|Wiliam    |Turner   |1970-05-27|
```

`person_id` 를 자동적으로 `1` 로 값을 생성했다.
만약, 행이 `2` 개 이상이라면, `person_id` 가 `1` 인 행을 찾기 위해 다음처럼 `where` 절을 사용해야 한다.

```mysql
select 
	person_id,
	first_name,
	last_name,
	birth_date
from
	person
where
	person_id = 1;
```

이 쿼리는 특정 기본 키 값을 지정한다.
하지만 다음처럼 `birth_date` 로도 검색가능하다

```mysql
select 
	person_id,
	first_name,
	last_name,
	birth_date
from
	person
where
	birth_date = '1970-05-27';
```


>[!note]
>- `MySql` 에서는 `date` 값에 `string` 값을 넣어도, `date` 값으로 자동 변환한다.
>
>- 열 이름과 값은 각 그 개수와 자료형이 일치해야 한다.
>
>- `7` 개의 열에 이름을 지정하고 `6` 개의 값만 제공하거나, 해당 열에 적합한 자료형으로 변환할수 없는 값을 제공하면 오류가 발생한다.

다음은 `3` 개의 `insert` 문을 사용하여 쿼리해 본다.

```mysql
insert into favorit_food (person_id, food)
values (
	1,
	'pizza'
);

  

insert into favorit_food (person_id, food)
values (
	1,
	'cookies'
);

  

insert into favorit_food (person_id, food)
values (
	1,
	'nachos'
);
```

이제 `order by` 를 사용하여 가장 좋아하는 음식을 알파벳 순서로 검색할수 있다.

```mysql
select food from favorit_food order by food;
```

```sh
food   |
-------+
cookies|
nachos |
pizza  |
```

`order by` 는 기본값으로 `ASC` (`오름차순`) 이다.
`order by` 절이 없다면, 테이블의 데이터가 순서대로 검색된다는 보장이 없다. 

다른사람을 `insert` 해본다.

```mysql
insert into person (
	person_id, 
	first_name, 
	last_name, 
	eye_color, 
	birth_date, 
	street, 
	city, 
	state, 
	country, 
	postal_code
)
values(
	null,
	'Susan',
	'Smith',
	'BL',
	'1975-11-02',
	'23 Maple St',
	'Arlington',
	'VA',
	'USA',
	'20220'
);
```

```mysql
select
	person_id ,
	first_name ,
	last_name ,
	birth_date
from person;
```

```sh
person_id|first_name|last_name|birth_date|
---------+----------+---------+----------+
        1|Wiliam    |Turner   |1970-05-27|
        2|Susan     |Smith    |1975-11-02|
```

## 데이터 수정

`Table` 의 `field` 를 수정하기 위해서 사용하는 구문은 `update` 절이다.
다음은 `person_id` 가 `1` 인 `row` 의 값을 `update` 하는 구문이다.

```mysql
update person
set street = '1225 Tremont St.',
	city = 'Boston',
	state = 'MA',	
	country = 'USA',
	postal_code = '02138'
where
	person_id = 1;

select
	person_id ,
	street ,
	state ,
	country ,
	postal_code
from
	person p
where
	person_id = 1;
```

```sh
person_id|street          |state|country|postal_code|
---------+----------------+-----+-------+-----------+
        1|1225 Tremont St.|MA   |USA    |02138      |
```


## 데이터 삭제

데이터를 삭제하기 위해서는 `delete` 문을 사용한다
다음은 `person_id` 가 `2` 인 `row`  를 삭제한다.

```mysql
delete from person where person_id = 2;

select
	person_id ,
	first_name ,
	last_name ,
	birth_date
from
	person p;
```

```sh
person_id|first_name|last_name|birth_date|
---------+----------+---------+----------+
        1|Wiliam    |Turner   |1970-05-27|
```

`person_id` 가 `2` 인 사람이 `query` 되지 않는것을 볼 수 있다.
