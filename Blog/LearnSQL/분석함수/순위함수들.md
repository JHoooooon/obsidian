
[[RANK - 로컬정렬]] 뿐만 아니라, 여러 순위함수들이 존재한다.

- **ROW_NUMBER:** 동점일 경우 순위가 임의로 지정된 각 행의 고유 번호를 반환

- **RANK:** 동점일 경우 순위에 차이가 있는 동일한 순위를 반환

- **DENSE_RANK:** 동점일 경우 순위에 차이가 없는 동일한 순위를 반환

이를 보기 위해서는 차이를 보는것이 중요하다.

```mysql
SELECT
	customer_id,
	COUNT(*) num_rentals,
	ROW_NUMBER() OVER (ORDER BY COUNT(*) DESC) row_number_rnk,
	RANK() OVER (ORDER BY COUNT(*) DESC) rank_number_rnk,
	DENSE_RANK() OVER (ORDER BY COUNT(*) DESC) dens_rank_number_rnk
FROM rental r
GROUP BY customer_id
ORDER BY 2 DESC;
```

```sh
customer_id|num_rentals|row_number_rnk|rank_number_rnk|dens_rank_number_rnk|
-----------+-----------+--------------+---------------+--------------------+
        148|         46|             1|              1|                   1|
        526|         45|             2|              2|                   2|
        144|         42|             3|              3|                   3|
        236|         42|             4|              3|                   3|
         75|         41|             5|              5|                   4|
        197|         40|             6|              6|                   5|
        469|         40|             7|              6|                   5|
        137|         39|             8|              8|                   6|
        178|         39|             9|              8|                   6|
        468|         39|            10|              8|                   6|
```

이를 보면 명확하게 무엇이 다른지 차이점이 보인다.
일단 `rank` 와 `dense_rank` 는 동점으로 계산될때, 동일한 순위로 계산된다.
하지만, 차이점은 `dense_rank` 는 순위가 그대로 이어지는 반면, `rank` 는 순위를 건너띈다

반면, `row_number` 는 동점으로 계산될때, 임의로 순위로 계산되며, 동일한 순위로 계산되지 않는다. 
이는 동점에 관계없이 각 행의 고유한 순위를 지정하는데 사용된다.

>[!info] 상황에 따라 다르지만 대부분은 `RANK` 함수를 많이 사용한다.







