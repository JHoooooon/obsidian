
서브쿼리는 `SQL` 구문에 포함된 쿼리이다.

서브쿼리는 항상 괄호 안에 들어가며, 일반적으로 포함 구문보다 먼저 실행된다.
다른 쿼리와 마찬가지로 서브쿼리는 다음 요소를 포함한 결과를 반환한다.

- **단일 열을 가진 단일 행**
- **단일 열을 가진 다중 행**
- **다중 열을 가진 다중 행**

서브쿼리에 의한 반환되는 결과셋의 유형은 그 사용방법과 더불어, 서브쿼리가 반환한 데이터를 처리할때 포함 구문이 사용할 연산자를 결정한다.

> [!info] [[서브쿼리의 유형]] 에서 더 자세히 설명한다.

서브쿼리는 `구문 범위`(`statement scope`) 가 있는 임시 테이블처럼 동작하므로, 포함 구문 실행이 완료되면 서브 쿼리가 반환한 데이터는 폐기된다.

>[!info] `SQL` 구문이 실행을 완료한 후 데이터베이스 서버가 서브쿼리 결과에 할당된 메모리를 해제한다.

```mysql
SELECT 
	customer_id,
	first_name,
	last_name
FROM customer
WHERE customer_id = (
	SELECT MAX(customer_id)
	FROM customer
);
```

```sh
customer_id|first_name|last_name|
-----------+----------+---------+
        599|AUSTIN    |CINTRON  |
```

지금의 서브쿼리는 **단일 열을 가진 단일 행** 을 반환한다.
이를 통해 어떤 값과 같은지 아닌지 비교하는 조건문의 표현식 중 하나로 쓸수 있다.

>[!info] 서브퀴리가 두개 이상의 행을 반환할 경우, 어떤 대상과 비교할수 있지만 무엇과 동일한지에 대한 조건을 사용할수는 없다.

