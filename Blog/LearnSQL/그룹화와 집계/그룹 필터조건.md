
`GROUP BY` 에서 필터조건을 적용하려면 `HAVING` 절을 사용해야 한다.

```mysql
SELECT 
	fa.actor_id,
	f.rating,
	COUNT(*)
FROM film_actor fa
	INNER JOIN film f
	ON fa.film_id = f.film_id
WHERE f.rating IN ('G', 'PG')
GROUP BY fa.actor_id, f.rating
HAVING COUNT(*) > 9;
```

```sh
actor_id|rating|COUNT(*)|
--------+------+--------+
     137|PG    |      10|
      37|PG    |      12|
     180|PG    |      12|
       7|G     |      10|
      83|G     |      14|
     129|G     |      12|
     111|PG    |      15|
      44|PG    |      12|
      26|PG    |      11|
      92|PG    |      12|
      17|G     |      12|
     158|PG    |      10|
     147|PG    |      10|
      14|G     |      10|
     102|PG    |      11|
     133|PG    |      10|
```

이는 두가지 필터 조건이 있다

1. `f.rating` 이 `G`, `PG` 인 `film` 필터링
2. `fa.actor_id`, `f.rating` 으로 그룹화 시킨후, 그룹화된 `column` 의 개수가 $9$ 보다 크면 `TRUE`

>[!warning] `GROUP BY` 절에 포함하는 쿠리에 필터를 추가할 때, 필터를 `WHERE` 절에 써서 원시 데이터에 대해 동작하도록 할지, `HAVING` 절에 써서 그룹화된 데이터에 대해 동작하도록 할지는 신중하게 고려해야 한다.

