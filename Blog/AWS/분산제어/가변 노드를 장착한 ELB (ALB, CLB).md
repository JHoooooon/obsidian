
---
>[!info]  [[AWS 의 ELB]] 와 [[로드밸런싱 처리부]]] 와 이어지는 내용이다.

`ELB` 는 유형에 따라 `Node` 생성방시기 달라진다.

`NLB` 생성시 `3개의 가용영역` 을 선택했다면 정확히 `Node 3개` 가 생성된다. 
`ALB` 와 `CLB` 는 그렇지 않다.

이 둘은 `Node` 를 `가변적으로 조정` 한다.
트래픽 부하나 로드밸런싱 대상 상태에 따라 노드를 확장하고 삭제한다.

만약 `ALB` 생성시 `3개의 가용영역` 을 선택하고, 대상이 없는 그룹을 `ALB`에 연결했다고 하자.
`로드밸런스` 대상(`Target`) 이 없다고 인지한 `ALB` 는 랜덤 가용 영역 한 곳에서만 노드를 생성한다

>[!info] 여기서 랜덤 가용영역에 생성된 `Node` 를 `2b` 라고 가정하자 

만약, `Target Instance` 인 `2a` 가 등록된다면, `2a` 에 추가 `Node` 를 생성한다
또 트래픽 부하가 늘어나면 `2c` 에도 `Node` 를 만든다

`Target Instance` 가 중지되면 `Node` 를 삭제하기도 한다

가용영역에 있던 기존 `Node` 를 제거하고 새 `Node` 를 만들어 교체하기도 한다.
교체 과정에서 동일한 가용영역에 `2개 이상의 Node` 가 공존할때도 있다.

>[!info] 이는 교체과정에서 발생하는 상황이므로, 시간이 지나면 가용영역별 하나의 노드만 남는다

`NLB` 는 로드밸런싱 대상 유무와 관계없이 모든 가용영역에 `Node` 를 `1개` 씩 생성해 둔다.
수명 주기 동안 `Node` 변경도 없다.

> [!info] 이는 `NLB` 에만 `EIP` 를 할당할수 잇는 근거다 된다고 한다.
> 모든 `Node` 가 고정적이기 때문이다<br>
> `EIP` 는 `Private IP` 단위로 할당되므로, `Private IP` 가 `ENI` 에서 해제되면 `EIP` 연결도 해제된다.<br> 따라서 `Private IP` 가 바뀌지 않는 `NLB` 만 `EIP` 를 연결하도록 설계했을것이라 한다.


