
---

`온프레미스` 의 `SLB` 를 살펴보자 

부하를 분산한다는 것은 `Client` 요청을 어딘가로 수신한고 있다는 뜻이다.
그 `Client Request` 를 여러 서버가 나누어 배분해 처리해야 한다.

`Client` 의 `Traffic` 을 가장 처음 수신하는 서버를 `가상서버` (`Virtual Sever`) 라 한다

다음은 `온프레미스` 의 `SLB` 예시이다

![[온프레미스의 SLB.png]]

`Client` 가 `DNS` 로 `URL` 을 요청하면, `Virtual Server` 의 `IP` 로 응답하고 `Request` 를 보낸다.
`가상서버` 는 웹 요청을 처리하기 위해 `80` 포트를 열어두고 수신을 기다린다.

이를 통해 `가상서버` 는 `Virtual IP` 와 `Virtual Port` 로 구성되는것을 볼 수 있다

`가상서버` 는 `request traffic` 을 `real server` 와 `real port` 로 부하를 분산하여 전달한다.
`가상서버` 의 `Load Balancing` 은 다음처럼 해석된다

>[!info] `13.246.100.25:80` 요청 -> `13.246.100.41:80` 또는 `13.246.100.82.80` 으로 분산

>[!info] `가상서버` 의 포트분산 기능은 `4 Layer` 이상에서 처리할 수 있으며, 최소 `Layer 4` 또는 `Layer 7` 네트워크 장치가 필요하다<br><br>이러한 장치를 **L4스위치**, **L7스위치**라 한다

>[!info] [[프로토콜의 계층화와 ISO 모델]] 을 통해 OSI 모델을 볼수 있으며, L4 는 [[Transport 계층 처리 프로세스]], L7 은 [[어플리케이션 처리 프로세스]] 을 참조할수 있다.

네트워크 상위 계층 장비는 하위계층 기능을 수행할 수 있다.
따라서 `부하분산`(`L4`) 과 더불어 `HTTP` 와 같은 `애플리케이션 프로토콜`(`L7`) 헤더 분석이 필요하면 `L7` 스위치를 사용하고, 헤더 분석이 필요 없다면 `IP` 와 `PORT` 쌍을 단순히 분산한다면 `L4` 스위치를 사용한다

두 계층 모두 `Layer 4` 레벨을 기반으로 트래픽을 처리하므로 대표해 `L4 스위치` 라 부른다.  

>[!info] [[L4 스위치의 특징]] 에서 `L4 스위치` 에 대해 볼수 있다.

